<!DOCTYPE html>
<html lang="en">
    <head>
        <!-- head/meta goes here -->
        {% include "./_parts/head.njk" %}
        <!-- // -->
    </head>
    <body>
        <header>
            <!-- Header goes here -->
            {% include "./_parts/header.njk" %}
            <!-- // -->
        </header>
        {% if type.includes("documentation") or type.includes("post") %}
        <content id="doc">
        {% elif type.includes("page") or type.includes("archive") %}
        <content id="page">
        {% elif type.includes("note") %}
        <content id="note" class=" grid grid-column-2-1 grid-column-mobile-1 grid-gap-30 grid-gap-mobile-0">
        {% endif %}  
            {% if type.includes("documentation") or type.includes("post") %}
            <section id="aside" class="mobile-hidden">
                <div class="aside-title">
                    <h2>Contents</h2>
                </div>
                <div id="article_contents_list" class="toc">
                    {{ content | toc | safe }}
                </div> 
                {% if type.includes("documentation") %}
                <div class="aside-section">
                    <!-- Docnav goes here -->
                    {% include "./_parts/docsnav.njk" %}
                    <!-- // -->
                </div>
                {% endif %}
                {% if type.includes("post") %}
                <div class="aside-section">
                    {% include "./_parts/blognav.njk" %}
                </div>
                {% endif %}
                <div class="aside-section">
                    {% include "./_parts/gitlog.njk" %}
                </div>
            </section>
            {% endif %}
            <section id="page_content">
                {% set regExpCode = r/<pre class=(.|\n)*?<\/pre>/gm %}
                {% set fixedContent = content | replace(regExpCode, "") | striptags %}
                {% set wordCount = fixedContent | wordcount %}
                {% set readingRate = 225 %}
                {% set readingTime = (wordCount/readingRate) | round %}
                {% if readingTime < 1 %}{% set readingTime = 1 %}{% endif %}
                {% if (not type.includes("archive")) and (not type.includes("page")) %}
                <div class="post-meta post-meta-base">
                    <div class="meta-single post-meta-base-left">
                        {% if type.includes("documentation") %}
                        <span class="meta-tiny"><i class="fas fa-globe-europe"></i> {{ published | dateFull }} | <i class="fas fa-hourglass-half"></i> {{ readingTime }} minute{% if readingTime > 1 %}s{% endif %}</span>
                        <i class="fas fa-edit"></i> {{ page.date | dateFull }}
                        {% elseif type.includes("note") %}   
                        {{ page.date | dateWithTime }}
                        {% else %}
                        {{ page.date | dateFull }}
                        {% endif %}
                    </div>
                    <div class="meta-single post-meta-base-right">
                        {% for tag in tags %}
                        {% if (not tag.includes("blog")) and (not tag.includes("android-docs")) and (not tag.includes("notes"))  %}
                        #<a class="meta-tag" href="/tags/{{ tag | slugify }}/">{{ tag }}</a>
                        {% elif tag.includes("notes") %}
                        <a class="meta-tag" href="/tags/{{ tag | slugify }}/"><i class="fas fa-level-up fa-rotate-270"></i> Return to notes</a>            
                        {% endif %}
                        {% endfor %}
                    </div>
                </div>
                <hr>
                {% if (not type.includes("note"))  %}
                <h1 class="section-title base-title">
                    {{ title }}
                </h1>
                {% endif %}
                {% elif type.includes("page") %}
                <h1 class="section-title base-title">
                    {{ title }}
                </h1>
                {% endif %}
                {% if (not type.includes("archive")) and (not type.includes("note"))  %}
                <div id="mobile_toc">
                    <details>
                        <summary>Contents</summary>
                        {{ content | toc | safe }}
                        </div>
                    </details>
                </div>
                <div class="post-block-extra">
                    {{ content | safe }}
                </div>
                {% else %}
                    {{ content | safe }}
                {% endif %}
            </section>
            {% for tag in tags %}
            {% if tag.includes("android-docs") %}
            <section id="link_out">
                <div class="links-out">
                    Ask about this topic on the <a href="https://support.google.com/work/android/thread/new">Android Enterprise help community</a>.
                </div>
                <div class="links-out">
                    Discuss this topic on the <a href="https://mobilxperts.slack.com/archives/C1V8JC31T">#AE</a> channel of the Mobile Pros Slack community. Here's an <a href="https://join.slack.com/t/mobilxperts/shared_invite/zt-3wrzh2o5-e5w8qSyiGF8AcH8_VErDCg">invite</a>.
                </div>
            </section>
            {% endif %}
            {% endfor %}
            <!-- Pagination goes here -->
            <!-- {% if pagination.href.next or pagination.href.previous %}
            {% include "./_parts/paginate.njk" %}
            {% endif %} -->
            <!-- // -->
            {% if type.includes("note") %}
            <section id="note_overview" class="">
                <div class="border-4px border-orange border-curved grid-padding-10 grid-padding-lr-20 first-heading-inline">
                    <h3>What are notes?</h3>
                    <p>These are short-form posts for small updates and quick thoughts. They are automatically published to LinkedIn and Twitter, too.</p>
                </div>
            </section>
            {% endif %}
            <!-- Page feedback goes here -->
            {% include "./_parts/feedback.njk" %}
            <!-- // -->
            {% if type.includes("documentation") or type.includes("post") %}
            <section id="mobile_aside"> 
                {% if type.includes("documentation") %}
                <div class="aside-section">
                    <!-- Docnav goes here -->
                    {% include "./_parts/docsnav.njk" %}
                    <!-- // -->
                </div>
                {% endif %}
                {% if type.includes("post") %}
                <div class="aside-section">
                    {% include "./_parts/blognav.njk" %}
                </div>
                {% endif %}
            </section>
            {% endif %}
        </content>
        <footer>
            <!-- Footer goes here -->
            {% include "./_parts/footer.njk" %}
            <!-- // -->
        </footer>
    </body>
</html>